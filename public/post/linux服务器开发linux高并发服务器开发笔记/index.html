<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>[Linux服务器开发]Linux高并发服务器开发笔记 - fzhiy&#39;s blog</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="fzhiy" /><meta name="description" content="1.Linux系统编程入门 GCC工作流程 GCC常用参数选项 使用如： 1 2 3 gcc test.c -E -o test.i #预处理源文件 gcc test.i -S -o test.s # 编译经过预处理的源文件test." /><meta name="keywords" content="Linux, 服务器开发" />






<meta name="generator" content="Hugo 0.88.1 with theme even" />


<link rel="canonical" href="https://blog.fzhiy.net/post/linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%BC%80%E5%8F%91linux%E9%AB%98%E5%B9%B6%E5%8F%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="[Linux服务器开发]Linux高并发服务器开发笔记" />
<meta property="og:description" content="1.Linux系统编程入门 GCC工作流程 GCC常用参数选项 使用如： 1 2 3 gcc test.c -E -o test.i #预处理源文件 gcc test.i -S -o test.s # 编译经过预处理的源文件test." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.fzhiy.net/post/linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%BC%80%E5%8F%91linux%E9%AB%98%E5%B9%B6%E5%8F%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-04-20T12:39:35+08:00" />
<meta property="article:modified_time" content="2022-04-20T12:39:35+08:00" />

<meta itemprop="name" content="[Linux服务器开发]Linux高并发服务器开发笔记">
<meta itemprop="description" content="1.Linux系统编程入门 GCC工作流程 GCC常用参数选项 使用如： 1 2 3 gcc test.c -E -o test.i #预处理源文件 gcc test.i -S -o test.s # 编译经过预处理的源文件test."><meta itemprop="datePublished" content="2022-04-20T12:39:35+08:00" />
<meta itemprop="dateModified" content="2022-04-20T12:39:35+08:00" />
<meta itemprop="wordCount" content="3160">
<meta itemprop="keywords" content="Linux," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="[Linux服务器开发]Linux高并发服务器开发笔记"/>
<meta name="twitter:description" content="1.Linux系统编程入门 GCC工作流程 GCC常用参数选项 使用如： 1 2 3 gcc test.c -E -o test.i #预处理源文件 gcc test.i -S -o test.s # 编译经过预处理的源文件test."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">fzhiy&#39;s blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">主页</li>
      </a><a href="https://fzhiy.net">
        <li class="mobile-menu-item">fzhiy的空间</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">归档</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">标签</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">分类</li>
      </a><a href="/about">
        <li class="mobile-menu-item">关于</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">fzhiy&#39;s blog</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">主页</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="https://fzhiy.net">fzhiy的空间</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">归档</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">标签</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">分类</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about">关于</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">[Linux服务器开发]Linux高并发服务器开发笔记</h1>

      <div class="post-meta">
        <span class="post-time"> 2022-04-20 </span>
        <div class="post-category">
            <a href="/categories/linux/"> Linux </a>
            </div>
          <span class="more-meta"> 约 3160 字 </span>
          <span class="more-meta"> 预计阅读 7 分钟 </span>
        <span id="busuanzi_container_page_pv" class="more-meta"> <span id="busuanzi_value_page_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 次阅读 </span>
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#1linux系统编程入门">1.Linux系统编程入门</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <h2 id="1linux系统编程入门">1.Linux系统编程入门</h2>
<p><img src="https://img.fzhiy.net/img/202204160950633.png" alt="image-20220416095019121"></p>
<ul>
<li>
<p>GCC工作流程</p>
<p><img src="https://img.fzhiy.net/img/202204160953290.png" alt="image-20220416095303150"></p>
</li>
<li>
<p>GCC常用参数选项</p>
<p><img src="https://img.fzhiy.net/img/202204160956865.png" alt="image-20220416095646595"></p>
<p><img src="https://img.fzhiy.net/img/202204161032383.png" alt="image-20220416103240998"></p>
<p>使用如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">gcc test.c -E -o test.i	<span class="c1">#预处理源文件</span>
gcc test.i -S -o test.s <span class="c1"># 编译经过预处理的源文件test.i，但不进行汇编</span>
gcc test.s -s -o a
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>两种库文件：<strong>静态库</strong> 和 <strong>动态库（共享库）</strong>。区别：</p>
<ul>
<li><strong>静态库</strong>在程序的链接阶段被复制到程序中；</li>
<li><strong>动态库</strong>在链接阶段没有被复制到程序中，而是程序<strong>在运行时由系统动态加载到内存中</strong>供程序调用。</li>
</ul>
<p>库的好处：1）代码保密；2）方便部署和分发。</p>
</li>
<li>
<p>静态库的制作</p>
<ul>
<li>
<p>命名规则：</p>
<ul>
<li>
<p>Linux：<strong>libxxx.a</strong></p>
<ul>
<li>lib : 前缀（固定）</li>
<li><strong>xxx : 库的名字，自己起</strong></li>
<li>.a : 后缀（固定）</li>
</ul>
</li>
<li>
<p>Windows：<strong>libxxx.lib</strong></p>
</li>
</ul>
</li>
<li>
<p>静态库制作</p>
<ul>
<li>
<p>gcc获得.o文件； gcc -c xxx.c -I 路径</p>
</li>
<li>
<p>将.o文件打包，使用ar工具（archive）</p>
<p><strong>ar rcs libxxx.a xxx.o xxx.o</strong></p>
<ul>
<li>r 将文件插入备存文件中；</li>
<li>c 建立备存文件；</li>
<li>s 索引。</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>静态库的使用</p>
<ul>
<li>gcc main.c -o app -I ./include/ -L ./lib/ -l 库名称</li>
<li>-I 头文件所在目录</li>
<li>-l 搜索使用的库名称</li>
<li>-L 库路径</li>
</ul>
</li>
<li>
<p>动态库的制作和使用</p>
<ul>
<li>
<p>制作</p>
<ul>
<li>
<p>命名规则：</p>
<ul>
<li>
<p>Linux：<strong>libxxx.so</strong></p>
<ul>
<li>lib: 固定前缀</li>
<li>xxx : 库的名字，自己起</li>
<li>.so ：固定后缀</li>
</ul>
<p>在Linux下是一个可执行文件</p>
</li>
<li>
<p>Windows：<strong>libxxx.dll</strong></p>
</li>
</ul>
</li>
<li>
<p>动态库的制作</p>
<ul>
<li>
<p>gcc得到.o文件，得到和位置无关的代码</p>
<p><strong>gcc -c -fpic/-fPIC a.c b.c</strong></p>
</li>
<li>
<p>gcc 得到动态库</p>
<p><strong>gcc -shared a.o b.o -o libcalc.so</strong></p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>静态库 与 动态库的工作原理</p>
<ul>
<li>
<p>静态库：GCC进行链接时，会把静态库中的代码打包到可执行程序中</p>
</li>
<li>
<p>动态库：GCC进行链接时，动态库的代码<strong>不会被打包到可执行程序</strong>中</p>
</li>
<li>
<p>程序启动之后，<strong>动态库会被动态加载到内存中</strong>，通过 **ldd(list dynamic dependencies)**命令检查动态库依赖关系</p>
</li>
<li>
<p>如何定位共享库文件呢？</p>
<p>当系统加载可执行代码的时候，能够知道其所依赖的库的名字，但是还需要知道绝对路径。此时需要系统的动态载入器来获取该绝对路径。对于elf格式的可执行程序，是由 <strong>ld-linux.so</strong>来完成的，它先后搜索elf文件的 <strong>DT_RPATH段 =&gt; 环境变量 LD_LIBRARY_PATH =&gt; /etc/ld.so.cache</strong>文件列表  =&gt; <strong>/lib/,  /usr/lib</strong> 目录找到库文件后将其载入内存。【不推荐使用第三种方式，系统自带了文件，可能同名】</p>
</li>
</ul>
</li>
<li>
<p>静态库 和 动态库 的对比</p>
<ul>
<li>
<p>程序编译成可执行程序的过程</p>
<p><img src="https://img.fzhiy.net/img/202204161539613.png" alt="image-20220416153939567"></p>
</li>
<li>
<p>静态库制作过程</p>
<p><img src="https://img.fzhiy.net/img/202204161541189.png" alt="image-20220416154128135"></p>
</li>
<li>
<p>动态库制作过程 （<strong>-fpic/-fPIC 生成与位置无关的目标代码</strong>）</p>
<p><img src="https://img.fzhiy.net/img/202204161542894.png" alt="image-20220416154238813"></p>
</li>
<li>
<p>静态库的优缺点</p>
<ul>
<li>优点：
<ul>
<li>静态库被打包到应用程序中加载速度快</li>
<li>发布程序无需提供静态库，移植方便；</li>
</ul>
</li>
<li>缺点：
<ul>
<li>消耗系统资源，浪费内存；</li>
<li>更新、部署、发布麻烦</li>
</ul>
</li>
</ul>
<p><img src="https://img.fzhiy.net/img/202204161547731.png" alt="image-20220416154745774"></p>
</li>
<li>
<p>动态库的优缺点</p>
<ul>
<li>优点：
<ul>
<li>可以实现进程间资源共享（共享库）</li>
<li>更新、部署、发布简单</li>
<li>可以控制何时加载动态库</li>
</ul>
</li>
<li>缺点：
<ul>
<li>加载速度比静态库慢；</li>
<li>发布程序时需要提供依赖的动态库。</li>
</ul>
</li>
</ul>
<p><img src="https://img.fzhiy.net/img/202204161550539.png" alt="image-20220416155035110"></p>
</li>
</ul>
</li>
<li>
<p>Makefile</p>
<p>Makefile文件定<u>义了一系列的规则来指定哪些文件需要先编译，哪些文件需要后编译，哪些文件需要重新编译，甚至进行更复杂的功能操作</u>，因为Makefile文件就像一个Shell脚本一样，也可以执行操作系统的命令。</p>
<p>好处：“<strong>自动化编译</strong>”，一旦写好，只需要一个make命令，整个工程完全自动编译，极大的提高了软件开发的效率。 make 是一个命令工具，是一个解释 Makefile文件中指令的命令工具，一般来说，大多数的 IDE 都有这个命令， 比如Delphi 的make，Visual C++的 nmake， Linux下 GNU 的make。</p>
<ul>
<li>
<p>Makefile文件命名和规则</p>
<ul>
<li>
<p>文件命名</p>
<ul>
<li>makefile或者Makefile</li>
</ul>
</li>
<li>
<p>Makefile 规则</p>
<ul>
<li>
<p>一个Makefile 文件中可以有一个或者多个规则</p>
<p><strong>目标 &hellip; : 依赖 &hellip;</strong></p>
<p>​		<strong>命令（shell命令）</strong></p>
<p>​		<strong>&hellip;</strong></p>
<ul>
<li>目标：最终要生成的文件（伪目标除外）</li>
<li>依赖：生成目标所需要的文件或是目标</li>
<li>命令：通过执行命令对依赖操作生成目标（<strong>命令前必须Tab缩进</strong>）</li>
</ul>
</li>
<li>
<p>Makefile 中的其他规则一般都是为第一条规则服务的。</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>工作原理</p>
<ul>
<li>
<p>命令在<strong>执行之前，需要先检查规则中的依赖是否存在</strong></p>
<ul>
<li>如果存在，执行命令；</li>
<li>如果不存在，向下检查其他的规则，检查有没有一个规则是用来生成这个依赖的，如果找到了，则执行该规则中的命令</li>
</ul>
</li>
<li>
<p><strong>检查更新</strong>，在执行规则中的命令时，会比较目标和依赖文件的时间；</p>
<ul>
<li>如果依赖的时间比目标的时间<strong>晚</strong>，<strong>需要重新生成目标</strong>；</li>
<li>如果依赖的时间比目标的时间早，目标不需要重新更新，对应规则中的命令不需要被执行。</li>
</ul>
</li>
</ul>
</li>
<li>
<p>变量</p>
<ul>
<li>
<p>自定义变量</p>
<ul>
<li>变量名 = 变量值  var = hello</li>
</ul>
</li>
<li>
<p>预定义变量</p>
<p>AR ：归档维护程序的名称，默认值为ar</p>
<p>CC：C编译器的名称，默认值为cc</p>
<p>CXX：C++编译器的名称，默认值为g++</p>
<p>$@：目标的完整名称									# <strong>自动变量只能在规则的命令中使用</strong></p>
<p>$&lt;：第一个依赖文件的名称</p>
<p>$^：所有的依赖文件</p>
</li>
<li>
<p>获取变量的值</p>
<p>$(变量名)</p>
<p><img src="https://img.fzhiy.net/img/202204171020497.png" alt="image-20220417102016131"></p>
</li>
</ul>
</li>
<li>
<p>模式匹配</p>
<p><img src="https://img.fzhiy.net/img/202204171023216.png" alt="image-20220417102353020"></p>
</li>
<li>
<p>函数</p>
<ul>
<li>
<p>$(wildcard PATTERN&hellip;)</p>
</li>
<li>
<p>功能：获取指定目录下指定类型的文件列表；</p>
</li>
<li>
<p>参数：PATTERN指的是某个或多个目录下的对应的某种类型的文件，如果有多个目录，一般使用空格间隔；</p>
</li>
<li>
<p>返回：得到的若干个文件的文件列表，文件名之间使用空格间隔</p>
</li>
</ul>
<p>示例：</p>
<p>​	*<em>$(wildcard <em>.c ./sub/*.c)</em></em></p>
<p>​	返回值格式：a.c b.c c.c d.c e.c f.c</p>
<ul>
<li>$(patsubst <pattern>, <replacement>, <text>)</li>
<li>功能：查找<text>中的单词（单词以“空格”、“Tab”或“回车”“换行”分割）是否符合模式<pattern>，如果匹配的话，则以<replacement>替换；</li>
<li><pattern>可以包括通配符<code>%</code>, 表示任意长度大的字符串。如果<replacement>中也包含<code>%</code>，那么，<replacement>中的这个<code>%</code>将是<pattern>中的那个%所代表的字串。（可以用<code>\</code>来转移，以<code>%</code>来表示真实含义的<code>%</code>字符）</li>
<li>返回：函数返回被替换过后的字符串；</li>
</ul>
<p>示例：</p>
<p>​	<strong>$(patsubst %.c, %.o, x.c bar.c)</strong></p>
<p>​	返回值格式：x.o bar.o</p>
<p><strong>.PHONY</strong> 尾目标，可以用于最后的clean目标，用于删除 .o 目标文件</p>
</li>
</ul>
</li>
<li>
<p>GDB调试</p>
<ul>
<li>
<p>什么是GDB</p>
<p>一般来说，GDB主要帮助完成下面四个方面的功能：</p>
<ol>
<li>启动程序，可以按照自定义的要求随心所欲的运行程序</li>
<li>可让被调试的程序在所指定的位置的断点处停住（断点可以是条件表达式）</li>
<li>当程序被停住时，可以检查此时程序中所发生的事；</li>
<li>可以改变程序，将一个BUG产生的影响修正从而测试其他BUG</li>
</ol>
</li>
<li>
<p>准备工作</p>
<p>通常在为调试而编译时，会关掉编译器的优化选项<code>-o</code>，并打开调试选项<code>-g</code>。另外，<code>-Wall</code>在尽量不影响程序行为的情况下选项打开所有warning，也可以发现许多问题，避免一些不必要的BUG。</p>
<p><strong>gcc -g -Wall program.c -o program</strong></p>
<p><code>-g</code>的作用是在<strong>可执行文件中加入源代码的信息</strong>，比如 可执行文件中第几条机器指令对应源代码的第几行，但并不是把整个源文件嵌入到可执行文件中，所以在调试时必须保证 gdb 能找到源文件。</p>
</li>
<li>
<p>GDB命令 —— 启动、退出、查看代码</p>
<ul>
<li>
<p>启动和退出</p>
<p>gdb 可执行程序</p>
<p>quit</p>
</li>
<li>
<p>给程序设置参数 / 获取设置参数</p>
<p>set args 10 20</p>
<p>show args</p>
</li>
<li>
<p>GDB 使用帮助 help</p>
</li>
<li>
<p>查看当前文件代码</p>
<p>list/l （从默认位置显示）</p>
<p>list/l 行号（从指定的行显示）</p>
<p>list/l 函数名（从指定的函数显示）</p>
</li>
<li>
<p>查看非当前文件代码</p>
<p>list/l 文件名:行号</p>
<p>list/l 文件名:函数名</p>
</li>
<li>
<p>设置显示的行数</p>
<p>show list/listsize</p>
<p>set list/listsize行数</p>
</li>
</ul>
</li>
<li>
<p>GDB命令——断点操作</p>
<ul>
<li>
<p>设置断点</p>
<p>b/break 行号</p>
<p>b/break 函数名</p>
<p>b/break 文件名:行号</p>
<p>b/break 文件名:函数</p>
</li>
<li>
<p>查看断点</p>
<p>i/info b/break</p>
</li>
<li>
<p>删除断点</p>
<p>d/del/delete 断点编号</p>
</li>
<li>
<p>设置断点无效</p>
<p>dis/disable 断点编号</p>
</li>
<li>
<p>设置断点生效</p>
<p>ena/enable 断点编号</p>
</li>
<li>
<p>设置条件断点（一般用在循环的位置）</p>
<p>b/break 10 if i == 5</p>
</li>
</ul>
</li>
<li>
<p>GDB命令——调试命令</p>
<ul>
<li>
<p>运行GDB程序</p>
<p>start （程序停在第一行）</p>
<p>run（遇到断点才停）</p>
</li>
<li>
<p>继续运行，到下一个断点停</p>
<p>c/continue</p>
</li>
<li>
<p>向下执行一行代码（不会进入函数体）</p>
<p>n/next</p>
</li>
<li>
<p>变量操作</p>
<p>p/print 变量名（打印变量值）</p>
<p>ptype 变量名（打印变量类型）</p>
</li>
<li>
<p>向下单步调试（遇到函数进入函数体）</p>
<p>s/step</p>
<p>finish（跳出函数体）</p>
</li>
<li>
<p>自动变量操作</p>
<p>display num（自动打印变量的值）</p>
<p>i/info display</p>
<p>undisplay 编号</p>
</li>
<li>
<p>其他操作</p>
<p>set var 变量名=变量值</p>
<p>until （跳出循环）</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>文件IO</p>
<ul>
<li>
<p>标准C库IO函数 （可以跨平台）</p>
<p><img src="https://img.fzhiy.net/img/202204202125271.png" alt="image-20220420212556936"></p>
</li>
<li>
<p>标准C库IO和Linux系统IO的关系 （调用和被调用）</p>
<p><img src="https://img.fzhiy.net/img/202204202136219.png" alt="image-20220420213652006"></p>
</li>
<li>
<p>虚拟地址空间</p>
<p><img src="https://img.fzhiy.net/img/202204202142104.png" alt="image-20220420214211970"></p>
<p>MMU（内存管理单元）将虚拟地址映射到物理地址。</p>
</li>
<li>
<p>文件描述符</p>
<p><img src="https://img.fzhiy.net/img/202204202152663.png" alt="image-20220420215257544"></p>
</li>
<li>
<p>Linux 系统IO函数</p>
<p>标准C库的 API，使用 <code>man 3 函数名</code>查看，Linux 系统IO函数，使用<code>man 2 函数名</code>查看说明。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="kt">int</span> <span class="nf">open</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">pathname</span><span class="p">,</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">);</span>
<span class="kt">int</span> <span class="nf">open</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">pathname</span><span class="p">,</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">,</span> <span class="n">mode_t</span> <span class="n">mode</span><span class="p">);</span>
<span class="kt">int</span> <span class="nf">close</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">);</span>
<span class="n">ssize_t</span> <span class="nf">read</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">count</span><span class="p">);</span>
<span class="n">ssize_t</span> <span class="nf">write</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">count</span><span class="p">);</span>
<span class="n">off_t</span> <span class="nf">lseek</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="n">off_t</span> <span class="n">offset</span><span class="p">,</span> <span class="kt">int</span> <span class="n">whence</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>stat结构体</p>
<p><img src="https://img.fzhiy.net/img/202204212126311.png" alt="image-20220421212627185"></p>
</li>
<li>
<p>st_mode变量</p>
<p><img src="https://img.fzhiy.net/img/202204212128183.png" alt="image-20220421212801173"></p>
</li>
</ul>
</li>
<li>
<p>模拟实现 <code>ls -l</code>命令 （<strong>见lesson12的 <code>ls-l.c</code></strong>）</p>
</li>
<li>
<p>文件属性操作函数</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="kt">int</span> <span class="nf">access</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">pathname</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mode</span><span class="p">);</span>
<span class="kt">int</span> <span class="nf">chmod</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">filename</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mode</span><span class="p">);</span>
<span class="kt">int</span> <span class="nf">chown</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">path</span><span class="p">,</span> <span class="n">uid_t</span> <span class="n">owner</span><span class="p">,</span> <span class="n">gid_t</span> <span class="n">group</span><span class="p">);</span>
<span class="kt">int</span> <span class="nf">truncate</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">path</span><span class="p">,</span> <span class="n">off_t</span> <span class="n">length</span><span class="p">);</span>	<span class="c1">// 缩减或扩展文件的尺寸至指定的大小
</span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>目录操作函数</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="kt">int</span> <span class="nf">mkdir</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">pathname</span><span class="p">,</span> <span class="n">mode_t</span> <span class="n">mode</span><span class="p">);</span>
<span class="kt">int</span> <span class="nf">rmdir</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">pathname</span><span class="p">);</span>
<span class="kt">int</span> <span class="nf">rename</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">oldpath</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">newpath</span><span class="p">);</span>
<span class="kt">int</span> <span class="nf">chdir</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">path</span><span class="p">);</span>
<span class="kt">char</span> <span class="o">*</span><span class="nf">getcwd</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">size</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li></li>
</ul>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">fzhiy</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        2022-04-20
        
    </span>
  </p>
  
  
</div>
<div class="post-reward">
  <input type="checkbox" name="reward" id="reward" hidden />
  <label class="reward-button" for="reward">赞赏支持</label>
  <div class="qr-code">
    
    <label class="qr-code-image" for="reward">
        <img class="image" src="https://img.fzhiy.net/img/20200812154839.png">
        <span>微信打赏</span>
      </label>
    <label class="qr-code-image" for="reward">
        <img class="image" src="https://img.fzhiy.net/img/20200812154858.png">
        <span>支付宝打赏</span>
      </label>
  </div>
</div><footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/linux/">Linux</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/cpp%E4%BE%AF%E6%8D%B7-stl%E7%AC%94%E8%AE%B0c&#43;&#43;%E6%A0%87%E5%87%86%E5%BA%93%E6%9E%B6%E6%9E%84%E6%BA%90%E7%A0%81/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">[C&#43;&#43;侯捷视频课笔记]C&#43;&#43;标准库——架构&amp;源码</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        <a class="next" href="/post/2022-04-13-c&#43;&#43;effective-c&#43;&#43;%E7%AC%94%E8%AE%B0/">
            <span class="next-text nav-default">[C&#43;&#43;]Effective C&#43;&#43;笔记</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  
    <script src="https://utteranc.es/client.js"
            repo="fzhiy/fzhiy.github.io"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/utterance">comments powered by utterances.</a></noscript>

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:fzhiy270@163.com" class="iconfont icon-email" title="email"></a>
      <a href="https://github.com/fzhiy" class="iconfont icon-github" title="github"></a>
      <a href="https://blog.csdn.net/feng_zhiyu" class="iconfont icon-csdn" title="csdn"></a>
      <a href="https://www.zhihu.com/people/ni-feng-88-10" class="iconfont icon-zhihu" title="zhihu"></a>
  <a href="https://blog.fzhiy.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv"> 本站总访问量 <span id="busuanzi_value_site_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 次 </span>
      <span class="division">|</span>
    <span id="busuanzi_container_site_uv"> 本站总访客数 <span id="busuanzi_value_site_uv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 人 </span>
  </div>

  <span class="copyright-year">
    &copy; 
    2020 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span>fzhiy</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.min.js" integrity="sha256-jwCP0NAdCBloaIWTWHmW4i3snUNMHUNO+jr9rYd2iOI=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.locales.min.js" integrity="sha256-ZwofwC1Lf/faQCzN7nZtfijVV6hSwxjQMwXL4gn9qU8=" crossorigin="anonymous"></script>
  <script><!-- NOTE: timeago.js uses the language code format like "zh_CN" (underscore and case sensitive) -->
    var languageCode = "en".replace(/-/g, '_').replace(/_(.*)/, function ($0, $1) {return $0.replace($1, $1.toUpperCase());});
    timeago().render(document.querySelectorAll('.timeago'), languageCode);
    timeago.cancel();  
  </script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>

<script id="baidu_analytics">
  var _hmt = _hmt || [];
  (function() {
    if (window.location.hostname === 'localhost') return;
    var hm = document.createElement("script"); hm.async = true;
    hm.src = "https://hm.baidu.com/hm.js?e4ff802fe8f2731918ababdb4ccf87bc";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>

<script id="baidu_push">
  (function(){
    if (window.location.hostname === 'localhost') return;
    var bp = document.createElement('script'); bp.async = true;
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
      bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
      bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
  })();
</script>




</body>
</html>
